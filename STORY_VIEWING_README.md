# ๐๏ธ Story Viewing - ะะธะฝะธะผะฐะปัะฝะฐั ัะตะฐะปะธะทะฐัะธั

**ะะฐัะฐ:** 27 ัะฝะฒะฐัั 2026
**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ะทะฐะฟััะบั

---

## ๐ฏ ะงัะพ ััะพ

ะะธะฝะธะผะฐะปัะฝัะน **Reverse Viewing** - ะฟัะพัะผะพัั Stories ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธะท ัะตะปะตะฒะพะน ะฐัะดะธัะพัะธะธ ะดะปั:
- ะะพะฒััะตะฝะธั ะพัะณะฐะฝะธัะตัะบะพะณะพ ะพัะฒะฐัะฐ
- ะัะพะณัะตะฒะฐ userbot ะฐะบะบะฐัะฝัะพะฒ
- ะะตะผะพะฝัััะฐัะธะธ ะฐะบัะธะฒะฝะพััะธ ะฒ ะฆะ

**ะะ ัะผะพััะธะผ:** Stories ะบะฐะฝะฐะปะพะฒ
**ะกะะะขะะะ:** Stories ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธะท `traffic_target_audience` (ะฟะพะดะฟะธััะธะบะธ ัะตะปะตะฒัั ะบะฐะฝะฐะปะพะฒ)

---

## โก ะัััััะน ััะฐัั

### 1. ะัะพะฒะตัะบะฐ ะณะพัะพะฒะฝะพััะธ
```bash
python scripts/check_story_viewing_ready.py
```

### 2. ะะฐะฟััะบ
```bash
python run_auto_comments.py
```

### 3. ะะพะฝะธัะพัะธะฝะณ
```bash
# ะะพะณะธ
tail -f logs/traffic_engine_*.log | grep story

# ะกัะฐัะธััะธะบะฐ
python scripts/story_stats.py
```

---

## ๐ ะขะตะบััะธะต ะฝะฐัััะพะนะบะธ (ะะตะฝั 2)

```env
MAX_STORY_VIEWS_PER_DAY=3          # 3 ะฟัะพัะผะพััะฐ/ะดะตะฝั
MIN_STORY_INTERVAL_SEC=300         # 5 ะผะธะฝัั ะผะตะถะดั
MAX_STORY_INTERVAL_SEC=900         # 15 ะผะธะฝัั ะผะฐะบั
STORY_VIEW_MIN_QUALITY_SCORE=70    # ะขะพะปัะบะพ ะบะฐัะตััะฒะตะฝะฝะฐั ะฆะ
```

**ะะถะธะดะฐะตะผะพ:** 8-12 ะฟัะพัะผะพััะพะฒ/ะดะตะฝั (4 ะฐะบะบะฐัะฝัะฐ ร 2-3)

---

## โ ะงัะพ ััะธัะฐะตััั ะฝะพัะผะพะน

- โ "No active stories" - ะฝะต ะฒัะต ะฟัะฑะปะธะบััั stories
- โ "Private stories" - ะทะฐะบััะป ะดะปั ะฝะตะฟะพะดะฟะธััะธะบะพะฒ
- โ Success rate 40-60% - ะฝะพัะผะฐะปัะฝัะน ะฟะพะบะฐะทะฐัะตะปั
- โ 0-1 FloodWait/ะดะตะฝั - ะฑะตะทะพะฟะฐัะฝัะต ะปะธะผะธัั

---

## โ๏ธ ะัะฐัะฝัะต ัะปะฐะณะธ

- โ FloodWait > 3 ัะฐะท/ัะฐั โ ัะฒะตะปะธัะธัั ะธะฝัะตัะฒะฐะปั
- โ "No target users" โ ะฝะตั ะฆะ, ะทะฐะฟัััะธัั ัะฑะพั
- โ Success rate < 30% โ ัะฐััะธัะธัั ะฆะ ะธะปะธ ะฟะพะฝะธะทะธัั ะฟะพัะพะณ
- โ ะะฐะฝั ะฐะบะบะฐัะฝัะพะฒ โ ะกะขะะ, ะฐะฝะฐะปะธะท

---

## ๐ ะัะฐัะธะบ ะฟัะพะณัะตะฒะฐ

| ะะตะฝั | ะะธะผะธั | ะะฝัะตัะฒะฐะปั |
|------|-------|-----------|
| 2-3 | 3/ะดะตะฝั | 5-15 ะผะธะฝ |
| 4-7 | 5/ะดะตะฝั | 3-10 ะผะธะฝ |
| 8-14 | 10/ะดะตะฝั | 2-8 ะผะธะฝ |
| 15+ | 30/ะดะตะฝั | 1-5 ะผะธะฝ |

**ะฃะฒะตะปะธัะธะฒะฐัั ัะพะปัะบะพ ะฟัะธ:** FloodWait < 2/ะดะตะฝั + ะฝะตั ะฑะฐะฝะพะฒ

---

## ๐๏ธ ะกัััะบัััะฐ

```
traffic_engine/channels/story_viewer/
โโโ __init__.py         # ะญะบัะฟะพัั
โโโ story_viewer.py     # Telethon API (220 ัััะพะบ)
โโโ story_monitor.py    # ะัะฝะพะฒะฝะพะน ัะธะบะป (185 ัััะพะบ)
```

**ะะฝัะตะณัะฐัะธั:** [traffic_engine/main.py:120-129](traffic_engine/main.py#L120-L129)
**ะะพะฝัะธะณ:** [traffic_engine/config.py:100-107](traffic_engine/config.py#L100-L107)

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- [STORY_VIEWING_QUICKSTART.md](STORY_VIEWING_QUICKSTART.md) - ะัััััะน ััะฐัั
- [STORY_VIEWING_SETUP.md](STORY_VIEWING_SETUP.md) - ะะพะปะฝัะน ะณะฐะนะด
- [ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ](C:\Users\mafio\.claude\plans\glittery-dancing-floyd.md)

---

## ๐๏ธ ะกะบัะธะฟัั

```bash
# ะัะพะฒะตัะบะฐ ะณะพัะพะฒะฝะพััะธ
python scripts/check_story_viewing_ready.py

# ะััััะฐั ััะฐัะธััะธะบะฐ
python scripts/story_stats.py

# ะกัะฐัะธััะธะบะฐ ะบะพะผะผะตะฝัะฐัะธะตะฒ (ะดะปั ััะฐะฒะฝะตะฝะธั)
python scripts/check_stats.py
```

---

## ๐ SQL ะะฐะฟัะพัั

```sql
-- ะัะพัะผะพััั ะทะฐ ัะตะณะพะดะฝั
SELECT status, COUNT(*)
FROM traffic_actions
WHERE action_type='story_view'
  AND DATE(created_at) = CURRENT_DATE
GROUP BY status;

-- ะขะพะฟ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั stories
SELECT target_user_id, COUNT(*) as views
FROM traffic_actions
WHERE action_type='story_view' AND status='success'
GROUP BY target_user_id
ORDER BY views DESC
LIMIT 10;

-- FloodWait ัะฐััะพัะฐ
SELECT account_id, COUNT(*) as floodwaits
FROM traffic_actions
WHERE action_type='story_view'
  AND error_message LIKE '%FloodWait%'
GROUP BY account_id;
```

---

## ๐ ะงัะพ ะดะฐะปััะต

1. **ะะฐะฟัััะธัั ะธ ัะตััะธัะพะฒะฐัั** (ะดะตะฝั 2-3)
2. **ะะพะฝะธัะพัะธัั 24 ัะฐัะฐ** - ะปะพะณะธ + ะะ
3. **ะะตะฝั 3: ัะฒะตะปะธัะธัั ะดะพ 5** - ะตัะปะธ 0 FloodWait
4. **ะะพัะปะต MVP:** ะะตะฐะบัะธะธ, ัะฑะพั viewers, ะฐะฝะฐะปะธัะธะบะฐ

---

## ๐ก Tips

- ๐ ะะฐะฑะพัะฐะตั ัะพะปัะบะพ 9-23 (ะฒะฝะต ะฒัะตะผะตะฝะธ ัะฟะธั)
- ๐ ะะต ัะพััะธััะนัะต ะปะธะผะธัั - ะฑะตะทะพะฟะฐัะฝะพััั > ัะบะพัะพััั
- ๐ FloodWait ัะฐัััะต? โ ัะฒะตะปะธัะธัั ะธะฝัะตัะฒะฐะปั
- ๐ ะัะพะฒะตััะนัะต ะะ ะบะฐะถะดัะต 2-3 ัะฐัะฐ
- ๐พ ะัะบะฐะฟััะต `sessions/` - ัะฐะผ ัะตััะธะธ ะฐะบะบะฐัะฝัะพะฒ

---

**โจ ะะพัะพะฒะพ! ะะฐะฟััะบะฐะนัะต ะธ ัะปะตะดะธัะต ะทะฐ ะปะพะณะฐะผะธ.**
