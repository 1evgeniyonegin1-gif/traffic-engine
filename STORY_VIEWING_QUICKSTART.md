# Story Viewing - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** 27 —è–Ω–≤–∞—Ä—è 2026

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π reverse viewing (–ø—Ä–æ—Å–º–æ—Ç—Ä stories –¶–ê) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.

---

## üöÄ –ó–∞–ø—É—Å–∫ –∑–∞ 3 —à–∞–≥–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¶–ê –≤ –ë–î (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)

```bash
psql -U postgres -d info_business -c "SELECT COUNT(*) FROM traffic_target_audience WHERE quality_score >= 70 AND status IN ('new', 'contacted');"
```

**–ï—Å–ª–∏ 0:** –°–Ω–∞—á–∞–ª–∞ —Å–æ–±—Ä–∞—Ç—å –¶–ê —á–µ—Ä–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –Ω–∞ 2-3 —á–∞—Å–∞)

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É

```bash
cd "c:\Users\mafio\OneDrive\–î–æ–∫—É–º–µ–Ω—Ç—ã\projects\info-business\traffic-engine-mvp"
python run_auto_comments.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

**–í –ª–æ–≥–∞—Ö:**
```bash
tail -f logs/traffic_engine_*.log | grep "story_view"
```

**–í –ë–î:**
```sql
SELECT COUNT(*), status FROM traffic_actions WHERE action_type='story_view' GROUP BY status;
```

---

## ‚öôÔ∏è –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–µ–Ω—å 2 –ø—Ä–æ–≥—Ä–µ–≤–∞)

```env
MAX_STORY_VIEWS_PER_DAY=3          # 3 –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/–¥–µ–Ω—å –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç
MIN_STORY_INTERVAL_SEC=300         # 5 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º–∏
MAX_STORY_INTERVAL_SEC=900         # 15 –º–∏–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º
STORY_VIEW_MIN_QUALITY_SCORE=70    # –¢–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –¶–ê
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- **–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤/–¥–µ–Ω—å:** 8-12 (4 –∞–∫–∫–∞—É–Ω—Ç–∞ √ó 2-3)
- **Success rate:** 40-60% (–º–Ω–æ–≥–∏–µ –±–µ–∑ stories - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- **FloodWait:** 0-1/–¥–µ–Ω—å (–µ—Å–ª–∏ –±–æ–ª—å—à–µ ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã)
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã:** 5-15 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º–∏

---

## ‚ö†Ô∏è –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º

‚úÖ "‚è≠Ô∏è User XXX has no active stories" - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç stories
‚úÖ "Private stories" - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫—Ä—ã–ª stories
‚úÖ Success rate 40-60% - –Ω–µ –≤—Å–µ –ø—É–±–ª–∏–∫—É—é—Ç stories —Ä–µ–≥—É–ª—è—Ä–Ω–æ

‚ùå FloodWait > 3 —Ä–∞–∑/—á–∞—Å - –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
‚ùå "No target users available" - –Ω–µ—Ç –¶–ê —Å quality_score >= 70

---

## üìà –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤

**–î–µ–Ω—å 3-4:**
```env
MAX_STORY_VIEWS_PER_DAY=5
MIN_STORY_INTERVAL_SEC=180
```

**–î–µ–Ω—å 5-7:**
```env
MAX_STORY_VIEWS_PER_DAY=10
MIN_STORY_INTERVAL_SEC=120
```

**–£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:**
- FloodWait < 2 —Ä–∞–∑/–¥–µ–Ω—å
- Success rate > 40%
- –ù–µ—Ç –±–∞–Ω–æ–≤

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [STORY_VIEWING_SETUP.md](STORY_VIEWING_SETUP.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –≥–∞–π–¥–∞.

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ù–æ–≤—ã–π –º–æ–¥—É–ª—å:** `traffic_engine/channels/story_viewer/`
- `story_viewer.py` - –ü—Ä–æ—Å–º–æ—Ç—Ä stories —á–µ—Ä–µ–∑ Telethon API
- `story_monitor.py` - –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `main.py` –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å ChannelMonitor

**–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** `traffic_target_audience` (quality_score >= 70)
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** `traffic_actions` (action_type='story_view')
**–°—á—ë—Ç—á–∏–∫–∏:** `userbot_accounts.daily_story_views`

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ! –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏.**
